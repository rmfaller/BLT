{
    "name": "ForgeRock Platform Test",
    "version": 1,
    "warmup": ["am-state", "ds-state", "idm-state"],
    "service-location-port": ["http://am0.example.com:8080", "http://am1.example.com:8080"],
    "loadbalancing-style": "roundrobin, random, ha",
    "threads": 2,
    "threads-at-a-time": 0,
    "thread-spawn-interval": 0,
    "connections": 0,
    "connection-action": "close, open",
    "value-base": 0,
    "value-top": 100000,
    "workload": ["create-identity", "update-identity"],
    "create-identity": [
        {
            "task": ["adminuser-authenticate", "adminuser-create-identity", "adminuser-logout"],
            "loading-style": "sequential, weighted",
            "maintain-connection": "true, false",
            "iterations": 0
        },
        {
            "query-user-objects": 0
        }
    ],
    "update-identity": [
        {
            "task": ["identity-authenticate", "adminuser-create-identity"],
            "iterations": 0
        }
    ],

    "adminuser-authenticate": { 
        "threshold": 200,
        "request": "POST",
        "header": {
            "X-OpenAM-Username": "amadmin",
            "X-OpenAM-Password": "password",
            "Content-Type": "application/json"
        },
        "url-endpoint": "/am/json/",
        "url-payload": "authenticate"
    },
    
    "adminuser-create-identity": {
        "threshold": 5000,
        "request": "POST",
        "header": {
            "iplanetDirectoryPro": "tokenId",
            "Content-Type": "application/json"
        },
        "url-endpoint": "/am/json/users/",
        "url-payload": "?_action=create",
        "data-payload": {
            "username": "user.$INCREMENT",
            "userpassword": "password",
            "mail": "user.$INCREMENT@example.com"
        }
    },
    
    "adminuser-logout": {
        "request": "POST",
        "header": {
            "iplanetDirectoryPro": "tokenId",
            "Content-Type": "application/json"
        },
        "url-endpoint": "/am/json/sessions/",
        "url-payload": "?_action=logout"
    },
    
    "authenticate-am-identity": {
        "service-location-port": ["http://am0.example.com:8080", "http://am1.example.com:8080"],
        "loading-style": "roundrobin, random, ha", 
        "value-base": 0,
        "value-top": 100000,
        "request": "POST",
        "header": {
            "X-OpenAM-Username": "user.$RANDOMVALUE",
            "X-OpenAM-Password": "password",
            "Content-Type": "application/json"
        },
        "url-endpoint": "/openam/json/",
        "url-payload": "authenticate"
    },
    
    "sleep": {
        "service-location-port": "http://localhost:8080",
        "request": "SLEEP",
        "header": {
            "Content-Type": "application/json"
        },
        "url-endpoint": 10
    }
}
